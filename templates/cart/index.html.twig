{% extends 'base.html.twig' %}

{% block title %}
    Votre panier 
{% endblock %}

{% block body %}
           {# section panier  #}
    <section class="bg-light p-3">
        <h1 class="font-bold text-center text-lg">Votre panier</h1> 
    </section>

    <div class="overflow-x-auto">
        <table class="w-full table-auto">
            <thead>
                <tr class="bg-gray-200">
                    <th class="p-3 border"></th> 
                    <th class="p-3 border"></th>
                    <th class="p-3 text-center border">Images</th> <!--  colonne Images -->
                    <th class="p-3 border">Produit</th> <!--  colonne Produit -->
                    <th class="p-3 border">Prix</th> <!-- colonne Prix -->
                    <th class="p-3 border">Quantité</th> <!-- Acolonne Quantité -->
                    <th class="p-3 border">Total</th> <!--  colonne Total -->
                    <th class="p-3 border"></th> <!--  colonne vide -->
                    <th class="p-3 border">Actions</th> <!--  colonne Actions -->
                    <th class="p-3 border"></th> 
                </tr>
            </thead>
            <tbody>
                {% for element in dataPanier %}
                    <tr class="bg-white">
                        <td class="p-3 border"></td>
                        <td class="p-3 border"></td> 
                        <td class="p-3 text-center border">
                            <img src="{{ asset('build/images/' ~ element.produit.images[0]) }}" alt="Image du produit" class="w-16 mx-auto">
                        </td> 
						<!-- affichage de l'image du produit -->
                        <td class="p-3 border">{{ element.produit.nom }}</td> <!-- affichage du nom du produit -->
                        <td class="p-3 border">{{ element.produit.prix }} €</td> <!-- affichage du prix du produit -->
                        <td class="p-3 border text-center">{{ element.quantite }}</td> <!-- affichage de la quantité -->
                        <td class="p-3 border">{{ element.quantite * element.produit.prix }} €</td> <!--affichage du total -->
                        <td class="p-3 border"></td> 
                        <td class="p-3 flex items-center justify-center space-x-5">
						<span></span>
                            <a href="{{ path('cart_remove', {id: element.produit.id}) }}" class="flex items-center justify-center w-8 h-8 rounded-full bg-yellow-400 hover:bg-yellow-500">
                                <span class="text-white">-</span>
                            </a> <!--lien de suppression -->
                            <a href="{{ path('cart_add', {id: element.produit.id}) }}" class="flex items-center justify-center w-8 h-8 rounded-full bg-green-500 hover:bg-green-600">
                                <span class="text-white">+</span>
                            </a> <!--  lien d'ajout -->
                            <a href="{{ path('cart_delete', {id: element.produit.id}) }}" class="flex items-center justify-center w-8 h-8 rounded-full bg-red-500 hover:bg-red-600">
                                <span class="text-white">×</span>
                            </a> <!--  le lien de suppression complète -->
                        </td> 
                    </tr>
                {% else %}

				    {# boutton votre panier #}
                    <tr class="bg-white">
                        <td class="p-3 border"></td> 
                        <td class="p-3 text-center border text-xl font-semibold" colspan="8" style="color:red">Votre panier est vide</td>
                    </tr>
                {% endfor %}
            </tbody>
         <tfoot>
                <tr class="bg-gray-200">
                    <td class="p-3 border"></td> 
                    <td class="p-3 border"></td> 
                    <td class="p-3 border"></td> 
                    <td class="p-3 border" colspan="3" style="font-size:20px;font-weight:bold;">Total</td>
                    <td class="p-3 border">{{ total }} €</td> <!--affichage du total du panier -->
                    <td class="p-3 border"></td> 
                    <td class="p-3 border flex justify-between space-x-4">
                        <a href="{{ path('devis') }}" class="text-center inline-block rounded bg-white px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-black shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg_primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] w-2/4">
                            Simuler votre devis <!-- lien vers la page de simulation de devis -->
                        </a>
                    </td>
                    <td class="p-3 border"></td> 
                </tr>
            
            </tbody>
        </table>
    </div>
{% endblock %}

