{% extends 'base.html.twig' %}

{% block title %}Hello MainController!
{% endblock %}
{% block javascript %}

	{{encore_entry_script_tags('slider') }}
	{{parent()}}
{% endblock %}

{% block body %}
	<!-- Slideshow container -->
	<div class="slideshow-container active">

		{% for article in articles %}
			<!-- Full-width images with number and caption text -->
			<div class="mySlides active ">
				<div class="numbertext">1 / 3</div>
				<img src="{{ asset('build/images/survette_mercedes.jpg')}}" style="width:100%" active>
				<div class="text">Ensemble Mercedes Black<a class="voirarticle" href="{{ path('app_detail_articles' , {'id' : article.id}) }} ">Voir</a>
				</div>

			</div>

			<div class="mySlides">
				<div class="numbertext">2 / 3</div>
				<img src="{{ asset('build/images/jogging-mercedes-amg-taille-s-survetement-homme.jpg')}}" style="width:100%">
				<div class="text">Ensemble AMG Black<a href="{{ path('app_detail_articles' , {'id' : article.id}) }} ">Voir</a>
				</div>

			</div>

			<div class="mySlides">
				<div class="numbertext">3 / 3</div>
				<img src="{{ asset('build/images/mercedes whithe.jpg')}}" style="width:100%">
				<div class="text">Ensemble Mercedes White<a href="{{ path('app_detail_articles' , {'id' : article.id}) }} ">Voir</a>
				</div>

			</div>

		{% endfor %}

		<!-- Next and previous buttons -->
		<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
		<a class="next" onclick="plusSlides(1)">&#10095;</a>
	</div>

	<br>

	<!-- The dots/circles -->
	<div style="text-align:center">
		<span class="dot" onclick="currentSlide(1)"></span>
		<span class="dot" onclick="currentSlide(2)"></span>
		<span class="dot" onclick="currentSlide(3)"></span>
	</div>

	<br><br>


	{# <div class="barrerecherche"><input class="form-control me-sm-2" type="search" placeholder="Search">
	      
	    <button class="btn btn-secondary mt-4" type="submit">Chercher</button></div> #}


	<div class="rerchearticle2">
		<div class="list-group">
			<br>
			<input type="text" name="search_text" id="search_text" placeholder="Rechercher un titre" class="form-control form-black"/>
		</div>

		<div class="list-group">

			<div class="col-12 col-sm-7 col-md-9 col-xxl-9">
				<div class="row">
					<div class="col-10">
						<h2 class="text-center text-black">Recherche avancée</h2>
					</div>
				</div>
				<br>
				{% for article in articles %}
					<div class="container">
						<div id="searchSection">
							<div class="row filter_data">
								<div class="corp_produit2" style="width:100%">
									<img src="{{ asset('build/images/' ~ article.images[0]) }}" class="d-block user-select-none" width="27%" height="100" aria-label="Placeholder: Image cap" focusable="false" role="img" preserveaspectratio="xMidYMid slice" viewbox="0 0 318 180" style="font-size:1.100rem;text-anchor:middle">
									<h2 class="titre_produit">{{ article.nom }}</h2><br><br>
									{# <div class="description_produit">{{ article.description}}</div> #}
									<div class="prix_produit">{{ article.prix}}€</div>
									<div class="voir_article">
										<a href="{{ path('app_detail_articles' , {'id' : article.id}) }} ">Voir</a>

									</div>
								</div>
							</div>
						</div>
					</div>
				

				{% endfor %}
				<div style="margin-top: 15px" class="d-flex justify-content-center">
					<ul class="pagination">
						<li class="page-item disabled">
							<a class="page-link" href="#">Previous</a>
						</li>
						<li class="page-item active">
							<a class="page-link" href="#">1</a>
						</li>
						<li class="page-item disabled">
							<a class="page-link" href="#">Next</a>
						</li>
					</ul>
				</div>

				<div class="titreVendu">
				</div>
				<div class="footer1">
				</div>

				<script>
				$(document).ready(function () {
				
				filter_data();
				function filter_data(main) {
				var action = 'fetch_data';
				var search_text = $('#search_text').val();
				// var types = get_filter('types');
				// var difficulty = get_filter('difficulty');
				// var check = get_filter('check');
				// var category = get_filter('category');
				var filter_ordre = $('#filter_ordre').val();
				
				$.ajax({
				url: "pages/filter.php",
				method: "POST",
				data: {
				search: 'search',
				page: page,
				action: action,
				types: types,
				difficulty: difficulty,
				check: check,
				category: category,
				search_text: search_text,
				filter_ordre: filter_ordre
				},
				success: function (data) {
				$('.filter_data').html(data);
				}
				});
				}
				$('#searchSection').on('click', '.page-link', function () {
				var page = $(this).data('page_number');
				filter_data(page);
				});
				
				$('#search_text').keyup(function () {
				var search = $(this).val();
				filter_data();
				});
				
				$("#filter_ordre").change(function () {
				var langage = $(this).children("option:selected").val();
				filter_data();
				
				});
				
				function get_filter(class_name) {
				var filter = [];
				$('.' + class_name + ':checked').each(function () {
				filter.push($(this).val());
				});
				return filter;
				}
				
				$('.common_selector').click(function () {
				filter_data();
				});
				
				});</script>
			<script>
				let slideIndex = 0;
showSlides();

function showSlides() {
let i;
let slides = document.getElementsByClassName("mySlides");
for (i = 0; i < slides.length; i++) {
slides[i].style.display = "none";
}
slideIndex++;
if (slideIndex > slides.length) {
slideIndex = 1
}
slides[slideIndex - 1].style.display = "block";
setTimeout(showSlides, 4000); // Change image every 4 seconds
}
			</script>
		{% endblock %}
